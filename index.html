<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Know Your Zakat Today</title>

<link href="https://fonts.googleapis.com/css2?family=Amiri&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body{margin:0;font-family:Arial;background:#f4f4f4;}
.hero{
height:32vh;
background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
display:flex;align-items:center;justify-content:center;text-align:center;
}
.ayah{
color:#d4af37;
font-family:'Amiri',serif;
font-size:26px;
}
.container{
max-width:900px;
margin:-40px auto 40px;
background:white;
padding:20px;
border-radius:12px;
box-shadow:0 5px 20px rgba(0,0,0,0.1);
}
h2{text-align:center;margin-top:0;}
label{font-weight:bold;}
input{
width:100%;
padding:8px;
margin:6px 0 12px;
border-radius:6px;
border:1px solid #ccc;
}
.section-title{
margin-top:25px;
font-size:18px;
font-weight:bold;
}
.result-box{
background:#f0f0f0;
padding:12px;
border-radius:6px;
margin-top:10px;
white-space:pre-line;
font-weight:bold;
}
.summary{
margin-top:20px;
padding:15px;
background:#e8f1f7;
border-radius:8px;
font-weight:bold;
}
details{
margin-bottom:10px;
background:#fafafa;
padding:10px;
border-radius:6px;
}
.button{
width:100%;
padding:10px;
background:#d4af37;
border:none;
border-radius:6px;
cursor:pointer;
font-weight:bold;
margin-top:10px;
}
.small{text-align:center;font-size:12px;color:#777;}
.footer{text-align:center;margin-top:15px;font-size:12px;color:#777;}
hr{margin:25px 0;}
</style>
</head>

<body>

<div class="hero">
<div class="ayah">وَأَقِيمُوا الصَّلَاةَ وَآتُوا الزَّكَاةَ</div>
</div>

<div class="container">

<h2>Know Your Zakat Today (జకాత్ లెక్కింపు)</h2>

<div id="hijriDate" class="small"></div>

<label>Optional Name (పేరు)</label>
<input type="text" id="userName">

<div class="section-title">PERSONAL (వ్యక్తిగత)</div>

<label>Gold (grams)</label>
<input type="number" id="goldGrams">

<label>Gold Price</label>
<input type="number" id="goldPrice" value="15649">

<label>Silver (grams)</label>
<input type="number" id="silverGrams">

<label>Silver Price</label>
<input type="number" id="silverPrice" value="270">

<label>Cash</label>
<input type="number" id="personalCash">

<label>Bank Balance</label>
<input type="number" id="personalBank">

<label>Receivables</label>
<input type="number" id="personalReceivables">

<label>Investments / Shares</label>
<input type="number" id="personalInvestments">

<label>Crypto / Digital</label>
<input type="number" id="personalCrypto">

<label>Other Liquid Wealth</label>
<input type="number" id="personalOther">

<label>Total Personal Liabilities (Current Only)</label>
<input type="number" id="personalLiabilities">

<details>
<summary>Form A Explanation (Click)</summary>
Sona, chandi har shakal me include karein.  
Cash ghar, bank, shop sab include karein.  
Udhar diya paisa jo wapas milna hai include karein.  
Shares business niyat se ho to market value likhein.  
Crypto bhi include karein.  
Insurance ka asal jama amount include karein.  
Customer se aana baqi paisa include karein.
</details>

<details>
<summary>Form B Explanation (Click)</summary>
Sirf current due liabilities minus karein.  
Loan EMI ka sirf jo is saal payable hai.  
Gas, electricity, tax unpaid amount.  
Workers salary unpaid.  
Rent unpaid.  
Past zakat unpaid.
</details>

<div class="result-box" id="personalResult"></div>

<hr>

<div class="section-title">BUSINESS (వ్యాపారం)</div>

<label>Closing Stock (Sale Value)</label>
<input type="number" id="stock">

<label>Raw Material</label>
<input type="number" id="raw">

<label>Finished Goods</label>
<input type="number" id="finished">

<label>Business Cash</label>
<input type="number" id="bizCash">

<label>Business Bank</label>
<input type="number" id="bizBank">

<label>Customer Receivables</label>
<input type="number" id="bizReceivables">

<label>Business Liabilities (Current Only)</label>
<input type="number" id="bizLiabilities">

<div class="result-box" id="businessResult"></div>

<div class="summary" id="finalSummary"></div>

<button class="button" onclick="downloadPDF()">Download Professional PDF</button>

<hr>

<h3>Support Madarsa</h3>
UPI: muftiasifali94@okhdfcbank

<a href="upi://pay?pa=muftiasifali94@okhdfcbank&pn=Zakat&cu=INR">
<button class="button">Pay via UPI</button>
</a>

<div class="footer">Noon Enterprises</div>

</div>

<script>

function formatINR(num){
return num.toLocaleString('en-IN',{minimumFractionDigits:2,maximumFractionDigits:2});
}

/* Hijri */
function showHijri(){
const today=new Date();
const jd=Math.floor((today/86400000)+2440587.5);
const l=jd-1948440+10632;
const n=Math.floor((l-1)/10631);
let ll=l-10631*n+354;
const j=(Math.floor((10985-ll)/5316))*(Math.floor((50*ll)/17719))
+(Math.floor(ll/5670))*(Math.floor((43*ll)/15238));
ll=ll-(Math.floor((30-j)/15))*(Math.floor((17719*j)/50))
-(Math.floor(j/16))*(Math.floor((15238*j)/43))+29;
const month=Math.floor((24*ll)/709);
const day=ll-Math.floor((709*month)/24);
const year=30*n+j-30;
const months=["Muharram","Safar","Rabi al-Awwal","Rabi al-Thani",
"Jumada al-Awwal","Jumada al-Thani","Rajab","Sha'ban","Ramadan",
"Shawwal","Dhul-Qadah","Dhul-Hijjah"];
document.getElementById("hijriDate").innerText=
"Hijri Date (Global): "+day+" "+months[month-1]+" "+year+" AH";
}
showHijri();

function calculate(){

let goldVal=(+goldGrams.value||0)*(+goldPrice.value||0);
let silverVal=(+silverGrams.value||0)*(+silverPrice.value||0);

let personalAssets=
goldVal+silverVal+
(+personalCash.value||0)+
(+personalBank.value||0)+
(+personalReceivables.value||0)+
(+personalInvestments.value||0)+
(+personalCrypto.value||0)+
(+personalOther.value||0);

let personalNet=personalAssets-(+personalLiabilities.value||0);
let personalZakat=personalNet>0?personalNet/40:0;

personalResult.innerText=
"Personal Net: ₹"+formatINR(personalNet)+
"\nZakat (2.5%): ₹"+formatINR(personalZakat);

let bizAssets=
(+stock.value||0)+
(+raw.value||0)+
(+finished.value||0)+
(+bizCash.value||0)+
(+bizBank.value||0)+
(+bizReceivables.value||0);

let bizNet=bizAssets-(+bizLiabilities.value||0);
let bizZakat=bizNet>0?bizNet/40:0;

businessResult.innerText=
"Business Net: ₹"+formatINR(bizNet)+
"\nZakat (2.5%): ₹"+formatINR(bizZakat);

let totalZakat=personalZakat+bizZakat;

finalSummary.innerText=
"Total Zakat Payable: ₹"+formatINR(totalZakat);

}

document.querySelectorAll("input").forEach(i=>i.addEventListener("input",calculate));

/* Professional PDF */
function downloadPDF(){

const { jsPDF }=window.jspdf;
let doc=new jsPDF();
let y=20;

doc.setFontSize(16);
doc.text("Zakat Calculation Report",105,y,{align:"center"});
y+=12;

doc.setFontSize(11);
doc.text("Name: "+(userName.value||"N/A"),20,y);
doc.text("Date: "+new Date().toLocaleDateString(),150,y);
y+=8;

doc.text(document.getElementById("hijriDate").innerText,20,y);
y+=10;

doc.text("Personal Net: ₹"+formatINR((+personalCash.value||0)),20,y);
y+=8;

doc.text(finalSummary.innerText,105,y,{align:"center"});

doc.save("Zakat_Report.pdf");
}

</script>

</body>
</html>
