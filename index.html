<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Know Your Zakat Today</title>

<link href="https://fonts.googleapis.com/css2?family=Amiri&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body{margin:0;font-family:Arial;background:#f4f4f4;}
.hero{
height:38vh;
background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
display:flex;align-items:center;justify-content:center;text-align:center;
}
.ayah{
color:#d4af37;
font-family:'Amiri',serif;
font-size:28px;
padding:20px;
}
.container{
padding:20px;
max-width:900px;
margin:-40px auto 40px;
background:white;
border-radius:12px;
box-shadow:0 5px 20px rgba(0,0,0,0.1);
}
h2{text-align:center;margin-top:0;}
input{
width:100%;
padding:8px;
margin:6px 0 12px;
border-radius:6px;
border:1px solid #ccc;
}
.tabs{
display:flex;
margin-bottom:20px;
}
.tab{
flex:1;
padding:12px;
text-align:center;
cursor:pointer;
background:#eee;
border-radius:6px 6px 0 0;
font-weight:bold;
}
.tab.active{
background:#d4af37;
}
.tab-content{
display:none;
}
.tab-content.active{
display:block;
}
.result-box{
background:#f0f0f0;
padding:12px;
border-radius:6px;
margin-top:10px;
white-space:pre-line;
font-weight:bold;
}
.summary{
margin-top:20px;
padding:15px;
background:#e8f1f7;
border-radius:8px;
font-weight:bold;
}
details{
margin-bottom:10px;
background:#f9f9f9;
padding:8px;
border-radius:6px;
}
.qr{
width:200px;
display:block;
margin:15px auto;
}
.button{
width:100%;
padding:10px;
background:#d4af37;
border:none;
border-radius:6px;
cursor:pointer;
font-weight:bold;
margin-top:10px;
}
.footer{
text-align:center;
margin-top:15px;
font-size:12px;
color:#777;
}
.small{
font-size:12px;
color:#777;
text-align:center;
}
hr{margin:25px 0;}
</style>
</head>

<body>

<div class="hero">
<div class="ayah">وَأَقِيمُوا الصَّلَاةَ وَآتُوا الزَّكَاةَ</div>
</div>

<div class="container">

<h2>Know Your Zakat Today</h2>

<div id="hijriDate" class="small"></div>
<div id="rateInfo" class="small"></div>

<label>Optional Name</label>
<input type="text" id="userName">

<div class="tabs">
<div class="tab active" onclick="openTab('personal')">Personal</div>
<div class="tab" onclick="openTab('business')">Business</div>
</div>

<!-- PERSONAL TAB -->
<div id="personal" class="tab-content active">

<h3>Personal Assets</h3>

<label>Gold (grams)</label>
<input type="number" id="goldGrams">

<label>Gold Price per gram</label>
<input type="number" id="goldPrice">

<label>Silver (grams)</label>
<input type="number" id="silverGrams">

<label>Silver Price per gram</label>
<input type="number" id="silverPrice">

<label>Cash</label>
<input type="number" id="personalCash">

<label>Bank Balance</label>
<input type="number" id="personalBank">

<label>Receivables</label>
<input type="number" id="personalReceivables">

<label>Investments / Shares</label>
<input type="number" id="personalInvestments">

<label>Crypto / Digital Assets</label>
<input type="number" id="personalCrypto">

<label>Other Liquid Wealth</label>
<input type="number" id="personalOther">

<details>
<summary>Form A Explanation (Click to Read)</summary>
Paste your full Roman Urdu Form A content here.
</details>

<h3>Personal Liabilities</h3>

<label>Total Personal Liabilities (Current Only)</label>
<input type="number" id="personalLiabilities">

<details>
<summary>Form B Explanation (Click to Read)</summary>
Paste your full Roman Urdu Form B content here.
</details>

<div class="result-box" id="personalResult"></div>

</div>

<!-- BUSINESS TAB -->
<div id="business" class="tab-content">

<h3>Business Assets</h3>

<label>Closing Stock (Sale Value)</label>
<input type="number" id="stock">

<label>Raw Materials</label>
<input type="number" id="raw">

<label>Finished Goods</label>
<input type="number" id="finished">

<label>Business Cash</label>
<input type="number" id="bizCash">

<label>Business Bank</label>
<input type="number" id="bizBank">

<label>Customer Receivables</label>
<input type="number" id="bizReceivables">

<h3>Business Liabilities</h3>

<label>Supplier Payable + Trade Liabilities (Current Only)</label>
<input type="number" id="bizLiabilities">

<div class="result-box" id="businessResult"></div>

</div>

<div class="summary" id="finalSummary"></div>

<button class="button" onclick="downloadPDF()">Download PDF</button>

<hr>

<h3>Support Madarsa</h3>
Madarsa Salihaat Lilbanaat Khammam<br>
20+ Nazira Completed<br>
Hifz Students Ongoing<br>
Deeni & Basic Education Provided

<b>UPI ID:</b> muftiasifali94@okhdfcbank

<img src="donation-qr.png" class="qr">

<a href="upi://pay?pa=muftiasifali94@okhdfcbank&pn=Zakat%20Donation&cu=INR">
<button class="button">Pay via UPI</button>
</a>

<div class="footer">Noon Enterprises</div>

</div>

<script>

function openTab(tabName){
document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
document.querySelectorAll('.tab-content').forEach(c=>c.classList.remove('active'));
event.target.classList.add('active');
document.getElementById(tabName).classList.add('active');
}

function formatINR(num){
return num.toLocaleString('en-IN',{minimumFractionDigits:2,maximumFractionDigits:2});
}

/* HIJRI */
function showHijri(){
const today=new Date();
const jd=Math.floor((today/86400000)+2440587.5);
const l=jd-1948440+10632;
const n=Math.floor((l-1)/10631);
let ll=l-10631*n+354;
const j=(Math.floor((10985-ll)/5316))*(Math.floor((50*ll)/17719))
+(Math.floor(ll/5670))*(Math.floor((43*ll)/15238));
ll=ll-(Math.floor((30-j)/15))*(Math.floor((17719*j)/50))
-(Math.floor(j/16))*(Math.floor((15238*j)/43))+29;
const month=Math.floor((24*ll)/709);
const day=ll-Math.floor((709*month)/24);
const year=30*n+j-30;
const months=["Muharram","Safar","Rabi al-Awwal","Rabi al-Thani",
"Jumada al-Awwal","Jumada al-Thani","Rajab","Sha'ban","Ramadan",
"Shawwal","Dhul-Qadah","Dhul-Hijjah"];
document.getElementById("hijriDate").innerText=
"Hijri Date (Calculated – Global): "+day+" "+months[month-1]+" "+year+" AH";
}
showHijri();

/* LOAD RATES */
async function loadRates(){
let response=await fetch("rates.json");
let data=await response.json();
goldPrice.value=data.gold;
silverPrice.value=data.silver;
document.getElementById("rateInfo").innerText=
"Rates last updated: "+data.lastUpdated;
}
window.onload=loadRates;

/* CALCULATION */
function calculate(){
let gVal=(goldGrams.value||0)*(goldPrice.value||0);
let sVal=(silverGrams.value||0)*(silverPrice.value||0);

let personalAssets=
gVal+sVal+
(+personalCash.value||0)+
(+personalBank.value||0)+
(+personalReceivables.value||0)+
(+personalInvestments.value||0)+
(+personalCrypto.value||0)+
(+personalOther.value||0);

let personalNet=personalAssets-(+personalLiabilities.value||0);
let personalZakat=personalNet>0?personalNet/40:0;

personalResult.innerText=
"Personal Net: ₹"+formatINR(personalNet)+"\n"+
"Personal Zakat (2.5%): ₹"+formatINR(personalZakat);

let bizAssets=
(+stock.value||0)+
(+raw.value||0)+
(+finished.value||0)+
(+bizCash.value||0)+
(+bizBank.value||0)+
(+bizReceivables.value||0);

let bizNet=bizAssets-(+bizLiabilities.value||0);
let bizZakat=bizNet>0?bizNet/40:0;

businessResult.innerText=
"Business Net: ₹"+formatINR(bizNet)+"\n"+
"Business Zakat (2.5%): ₹"+formatINR(bizZakat);

let totalZakat=personalZakat+bizZakat;

finalSummary.innerText=
"Total Zakat Payable: ₹"+formatINR(totalZakat);

saveYearRecord(totalZakat);
}

document.querySelectorAll("input").forEach(i=>i.addEventListener("input",calculate));

/* YEAR SAVE */
function saveYearRecord(amount){
const year=document.getElementById("hijriDate").innerText;
localStorage.setItem(year,amount);
}

/* PDF */
function downloadPDF(){
const { jsPDF }=window.jspdf;
let doc=new jsPDF();
doc.text("Zakat Calculation Report",20,20);
doc.text(finalSummary.innerText,20,40);
doc.save("Zakat_Report.pdf");
}

</script>

</body>
</html>
