<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Free Zakat Calculator</title>

<link href="https://fonts.googleapis.com/css2?family=Amiri&display=swap" rel="stylesheet">

<style>
body { margin: 0; font-family: Arial, sans-serif; background: #f4f4f4; }
.hero {
  height: 45vh;
  background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
  display: flex; align-items: center; justify-content: center; text-align: center;
}
.ayah { color: #d4af37; font-family: 'Amiri', serif; font-size: 28px; padding: 20px; }

.container {
  padding: 20px;
  max-width: 650px;
  margin: -40px auto 40px;
  background: white;
  border-radius: 12px;
  box-shadow: 0 5px 20px rgba(0,0,0,0.1);
}

h2 { text-align: center; }
.section-title { margin-top: 20px; font-weight: bold; }

label { font-size: 14px; font-weight: bold; }

input {
  width: 100%;
  padding: 10px;
  margin: 6px 0 12px;
  border-radius: 6px;
  border: 1px solid #ccc;
}

.radio-group {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin-bottom: 15px;
}

.result {
  margin-top: 20px;
  padding: 15px;
  background: #f0f0f0;
  border-radius: 6px;
  font-weight: bold;
}

.footer {
  text-align: center;
  margin-top: 20px;
  font-size: 14px;
  color: #777;
}

.small-note {
  font-size: 12px;
  color: #555;
  margin-bottom: 10px;
}
</style>
</head>

<body>

<div class="hero">
  <div class="ayah">
    وَأَقِيمُوا الصَّلَاةَ وَآتُوا الزَّكَاةَ
  </div>
</div>

<div class="container">

<h2>Free Zakat Calculator</h2>

<div class="radio-group">
  <label><input type="radio" name="nisab" value="silver" checked> Silver Nisab</label>
  <label><input type="radio" name="nisab" value="gold"> Gold Nisab</label>
</div>

<div class="small-note" id="priceStatus">
Fetching latest gold & silver prices...
</div>

<div class="section-title">Precious Metals</div>

<label>Gold (grams)</label>
<input type="number" id="goldGrams">

<label>Gold Price per gram (₹)</label>
<input type="number" id="goldPrice">

<label>Silver (grams)</label>
<input type="number" id="silverGrams">

<label>Silver Price per gram (₹)</label>
<input type="number" id="silverPrice">

<div class="section-title">Other Assets</div>

<label>Cash in Hand (₹)</label>
<input type="number" id="cash">

<label>Bank Balance (₹)</label>
<input type="number" id="bank">

<label>Business Assets (₹)</label>
<input type="number" id="business">

<label>Receivables / Investments (₹)</label>
<input type="number" id="otherAssets">

<div class="section-title">Liabilities (Current Due Only)</div>

<label>Total Liabilities (₹)</label>
<input type="number" id="liability">

<div class="result" id="result"></div>

<div class="footer">
Powered by Noon Enterprises
</div>

</div>

<script>

function formatINR(num) {
  return num.toLocaleString('en-IN', {minimumFractionDigits: 2, maximumFractionDigits: 2});
}

async function fetchMetalPrices() {
  try {
    // Using metals.live public endpoint (USD per ounce)
    const response = await fetch("https://api.metals.live/v1/spot");
    const data = await response.json();

    let goldUSD = data[0].gold;
    let silverUSD = data[1].silver;

    // Convert ounce to gram
    const ounceToGram = 31.1035;

    // Get USD to INR rate
    const fxResponse = await fetch("https://api.exchangerate-api.com/v4/latest/USD");
    const fxData = await fxResponse.json();
    let usdToInr = fxData.rates.INR;

    let goldINR = (goldUSD / ounceToGram) * usdToInr;
    let silverINR = (silverUSD / ounceToGram) * usdToInr;

    document.getElementById("goldPrice").value = goldINR.toFixed(2);
    document.getElementById("silverPrice").value = silverINR.toFixed(2);

    document.getElementById("priceStatus").innerText =
      "Live prices loaded (24K gold approx). You may edit if needed.";

  } catch (error) {
    document.getElementById("priceStatus").innerText =
      "Could not fetch live prices. Please enter manually.";
  }
}

function calculateZakat() {

  let goldGrams = parseFloat(document.getElementById("goldGrams").value) || 0;
  let goldPrice = parseFloat(document.getElementById("goldPrice").value) || 0;
  let silverGrams = parseFloat(document.getElementById("silverGrams").value) || 0;
  let silverPrice = parseFloat(document.getElementById("silverPrice").value) || 0;

  let cash = parseFloat(document.getElementById("cash").value) || 0;
  let bank = parseFloat(document.getElementById("bank").value) || 0;
  let business = parseFloat(document.getElementById("business").value) || 0;
  let otherAssets = parseFloat(document.getElementById("otherAssets").value) || 0;
  let liability = parseFloat(document.getElementById("liability").value) || 0;

  let goldValue = goldGrams * goldPrice;
  let silverValue = silverGrams * silverPrice;

  let totalAssets = goldValue + silverValue + cash + bank + business + otherAssets;
  let netWealth = totalAssets - liability;

  let nisabType = document.querySelector('input[name="nisab"]:checked').value;
  let nisabValue = nisabType === "gold"
      ? 87.48 * goldPrice
      : 612.36 * silverPrice;

  let resultDiv = document.getElementById("result");

  if (totalAssets === 0 && liability === 0) {
    resultDiv.innerHTML = "";
    return;
  }

  if (netWealth < nisabValue) {
    resultDiv.innerHTML =
      "Total Assets: ₹" + formatINR(totalAssets) +
      "<br>Total Liabilities: ₹" + formatINR(liability) +
      "<br>Net Zakatable Wealth: ₹" + formatINR(netWealth) +
      "<br>Nisab Threshold: ₹" + formatINR(nisabValue) +
      "<br><br>Zakat is NOT obligatory.";
  } else {
    let zakat = netWealth * 0.025;
    resultDiv.innerHTML =
      "Total Assets: ₹" + formatINR(totalAssets) +
      "<br>Total Liabilities: ₹" + formatINR(liability) +
      "<br>Net Zakatable Wealth: ₹" + formatINR(netWealth) +
      "<br>Nisab Threshold: ₹" + formatINR(nisabValue) +
      "<br><br>Zakat Due (2.5%): ₹" + formatINR(zakat);
  }
}

document.querySelectorAll("input").forEach(input => {
  input.addEventListener("input", calculateZakat);
});
document.querySelectorAll('input[name="nisab"]').forEach(radio => {
  radio.addEventListener("change", calculateZakat);
});

fetchMetalPrices();

</script>

</body>
</html>
